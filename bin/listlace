#!/usr/bin/env ruby

require "bundler/setup"
require "pry"
require "listlace"

ActiveRecord::Migration.verbose = false

Listlace.extend Listlace::Commands::LibraryCommands
Listlace.extend Listlace::Commands::PlayerCommands

Listlace.library = Listlace::Library.new
Listlace.player = Listlace::Player.new

puts "Hello, you have #{Listlace.library.size} songs."

at_exit do
  Listlace.player.stop
end

Listlace.pry(
  quiet: true,
  prompt: [proc { ">> " }, proc { " | " }],
  print: proc { |output, value| Pry::DEFAULT_PRINT.call(output, value) unless value.nil? }
)
